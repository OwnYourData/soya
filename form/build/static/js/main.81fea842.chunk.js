(this["webpackJsonpsoya-form"]=this["webpackJsonpsoya-form"]||[]).push([[0],{1028:function(e,t){},1037:function(e,t){},1039:function(e,t){},1255:function(e,t){},1257:function(e,t){},1267:function(e,t){},1269:function(e,t){},1294:function(e,t){},1295:function(e,t){},1301:function(e,t){},1320:function(e,t){},1467:function(e,t){},1485:function(e,t){},1486:function(e,t){},1616:function(e,t,n){},1621:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(30),r=n.n(c),i=(n(904),n(52)),o=n(87),s=n(23),u=n(38),l=n(20),d=n(508),j=n(509),f=(n(1616),n(19)),b=n(506),O=n(1631),v=n(507),p=n(369),m=n(1659),h=n(1655),x=n(879),g=n(1654),y=n(1629),w=n(671),C=n(25),S=Object(w.a)((function(e){return{formControl:{margin:e.spacing(1),width:"100%"},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2}}})),k=Object(l.withJsonFormsControlProps)((function(e){var t=S(),n=e.id,c=e.schema,r=e.label,i=e.description,o=e.handleChange,s=e.path,u=e.data,l=void 0===u?[]:u,d=Object(a.useCallback)((function(){var e=c.enum||c.oneOf;return e?e.map((function(e){var t,n;return{text:null!==(t=e.title)&&void 0!==t?t:e,value:null!==(n=e.const)&&void 0!==n?n:e}})):[]}),[c.enum,c.oneOf]),j=d();return Object(C.jsxs)(b.a,{id:n,className:t.formControl,children:[Object(C.jsx)(O.a,{children:r}),Object(C.jsx)(v.a,{multiple:!0,value:l,onChange:function(e){o(s,e.target.value)},input:Object(C.jsx)(p.a,{id:"select-multiple-chip"}),renderValue:function(e){return Object(C.jsx)("div",{className:t.chips,children:e.map((function(e){var n=j.find((function(t){return t.value===e})),a=n.value,c=n.text;return Object(C.jsx)(m.a,{label:c,className:t.chip},a)}))})},MenuProps:{getContentAnchorEl:null},children:j.map((function(e){var t=e.value,n=e.text;return Object(C.jsxs)(h.a,{value:t,children:[Object(C.jsx)(x.a,{checked:-1!==l.indexOf(t)}),Object(C.jsx)(g.a,{primary:n})]},t)}))}),i?Object(C.jsx)(y.a,{children:i}):void 0]})})),E=[{tester:Object(f.rankWith)(20,Object(f.and)(Object(f.schemaTypeIs)("array"),Object(f.or)(f.isOneOfControl,f.isEnumControl,f.isOneOfEnumControl))),renderer:k}],N=n(511),J=n(683),L=n(674),D=n(1632),F=n(1633),I=n(1648),P=n(1646),R=n(1647),A=n(1627),U=n(512);console.log(N.name,N.version);var M=[].concat(Object(u.a)(E),Object(u.a)(d.materialRenderers)),T=function(e){window.parent&&("function"===typeof e&&(e=e()),window.parent.postMessage(e,"*"))},W=Object(U.debounce)((function(e){T(e)}),250),B=Object(U.debounce)((function(e){T(e)}),400),H=Object(w.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:150}}}));var q=function(){var e=H(),t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],r=n[1],f=Object(a.useState)(""),p=Object(s.a)(f,2),m=p[0],x=p[1],y=Object(a.useState)([]),w=Object(s.a)(y,2),S=w[0],k=w[1],E=Object(a.useState)(""),N=Object(s.a)(E,2),U=N[0],T=N[1],q=Object(a.useState)(""),z=Object(s.a)(q,2),K=z[0],V=z[1],Y=Object(a.useState)(""),_=Object(s.a)(Y,2),G=_[0],Q=_[1],X="embedded"===G,Z=Object(a.useState)(void 0),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ne=Object(a.useState)({}),ae=Object(s.a)(ne,2),ce=ae[0],re=ae[1],ie=Object(a.useState)(""),oe=Object(s.a)(ie,2),se=oe[0],ue=oe[1],le=Object(a.useState)(!1),de=Object(s.a)(le,2),je=de[0],fe=de[1],be=Object(a.useCallback)(Object(o.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=19;break}return fe(!0),e.prev=2,t=new j.Soya,n={language:K||void 0,tag:U||void 0},e.t0=t,e.next=8,t.pull(m);case 8:return e.t1=e.sent,e.t2=n,e.next=12,e.t0.getForm.call(e.t0,e.t1,e.t2);case 12:a=e.sent,te(a),e.next=18;break;case 16:e.prev=16,e.t3=e.catch(2);case 18:fe(!1);case 19:case"end":return e.stop()}}),e,null,[[2,16]])}))),[m,K,U]),Oe=Object(a.useCallback)((function(){B({type:"update",isInitialized:c,documentHeight:document.documentElement.scrollHeight})}),[c]),ve=Object(a.useCallback)((function(){Object(o.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=k,e.next=3,(new j.Soya).query({name:m});case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[m]);Object(a.useEffect)((function(){c||Object(o.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be();case 2:r(!0);case 3:case"end":return e.stop()}}),e)})))()}),[r,c,be]),Object(a.useEffect)((function(){be()}),[U,K]),Object(a.useEffect)((function(){var e,t,n,a,c=new URL(window.location.href).searchParams,r=c.get("data");if(r)try{re(JSON.parse(decodeURIComponent(r)))}catch(i){}x(null!==(e=c.get("schemaDri"))&&void 0!==e?e:""),T(null!==(t=c.get("tag"))&&void 0!==t?t:""),V(null!==(n=c.get("language"))&&void 0!==n?n:""),Q(null!==(a=c.get("viewMode"))&&void 0!==a?a:"")}),[]),Object(a.useEffect)((function(){var e=function(){Oe()};return window.addEventListener("click",e),function(){return window.removeEventListener("click",e)}}),[Oe]),Object(a.useEffect)((function(){var e=function(e){var t;if(e.source!==window&&"data"===(null===(t=e.data)||void 0===t?void 0:t.type)){var n=e.data.data;JSON.stringify(n)!==JSON.stringify(ce)&&re(n)}};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}),[ce]);var pe=new URL(window.location.href),me=pe.searchParams;m&&me.set("schemaDri",m),U&&me.set("tag",U),K&&me.set("language",K),ce&&me.set("data",JSON.stringify(ce));var he=void 0;X||(he=Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{children:[Object(C.jsx)(J.a,{label:"SOyA Schema DRI",onChange:function(e){x(e.target.value)},onKeyUp:function(e){"Enter"===e.key?be():m.length>=3?ve():k([])},value:m}),Object(C.jsx)(L.a,{className:"Button",variant:"contained",color:"primary",onClick:function(){return be()},children:"Load Form"})]}),Object(C.jsx)(D.a,{component:"nav",children:S.map((function(e){return Object(C.jsx)(F.a,{button:!0,onClick:function(){x(e.name),k([])},children:Object(C.jsx)(g.a,{primary:e.name})},"".concat(e.dri,"-").concat(e.name))}))})]}));var xe=function(e){if(e){var t=e.filter((function(t,n){return!!t&&e.indexOf(t)===n}));return[{value:"",text:"Default"}].concat(Object(u.a)(t.map((function(e){return{value:e,text:e}}))))}},ge=xe(null===ee||void 0===ee?void 0:ee.options.map((function(e){return e.tag}))),ye=xe(null===ee||void 0===ee?void 0:ee.options.map((function(e){return e.language}))),we=void 0;je||(we=Object(C.jsxs)("div",{children:[ge?Object(C.jsxs)(b.a,{className:e.formControl,children:[Object(C.jsx)(O.a,{children:"Tag"}),Object(C.jsx)(v.a,{value:U,label:"Tag",onChange:function(e){T(e.target.value)},children:ge.map((function(e){var t=e.value,n=e.text;return Object(C.jsx)(h.a,{value:t,children:n},"tag-".concat(t))}))})]}):void 0,ye?Object(C.jsxs)(b.a,{className:e.formControl,children:[Object(C.jsx)(O.a,{children:"Language"}),Object(C.jsx)(v.a,{value:K,label:"Language",onChange:function(e){V(e.target.value)},children:ye.map((function(e){var t=e.value,n=e.text;return Object(C.jsx)(h.a,{value:t,children:n},"tag-".concat(t))}))})]}):void 0]}));var Ce=void 0;je||!c?Ce=Object(C.jsx)("div",{children:Object(C.jsx)(I.a,{})}):ee&&(Ce=Object(C.jsx)(l.JsonForms,{schema:ee.schema,uischema:ee.ui,data:ce,renderers:M,cells:d.materialCells,onChange:function(e){var t=e.data;re(t),ue(JSON.stringify(t,null,2)),W({type:"data",evt:e})}}));var Se=void 0;return je||X||(Se=Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h2",{children:"Data"}),Object(C.jsx)(P.a,{children:Object(C.jsx)(R.a,{children:Object(C.jsx)(A.a,{value:se,style:{width:"100%"},onChange:function(e){var t=e.target.value;ue(t);try{var n=JSON.parse(t);re(n)}catch(a){}}})})}),Object(C.jsx)("h2",{children:"Permalink"}),Object(C.jsx)(P.a,{children:Object(C.jsx)(R.a,{children:pe.toString()})})]})),Oe(),Object(C.jsxs)("div",{className:X?"":"App",children:[c?X?void 0:Object(C.jsx)("h1",{children:"OwnYourData SOyA-Forms"}):void 0,c?he:void 0,c?we:void 0,Ce,c?Se:void 0]})};r.a.render(Object(C.jsx)(q,{}),document.getElementById("root"))},511:function(e){e.exports=JSON.parse('{"name":"soya-form","version":"0.3.18","private":true,"dependencies":{"@emotion/react":"^11.10.6","@emotion/styled":"^11.10.6","@jsonforms/core":"^2.5.2","@jsonforms/material-renderers":"^2.5.2","@jsonforms/react":"^2.5.2","@types/node":"^16.11.28","@types/react":"^17.0.2","@types/react-dom":"^17.0.2","debounce":"^1.2.1","react":"^17.0.2","react-dom":"^17.0.2","react-scripts":"^4.0.1","soya-js":"^0.5.32","typescript":"^4.6.3"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","deploy":"sh ./scripts/deploy.sh","docker":"npm run build && docker build -t oydeu/oyd-forms ."},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@types/debounce":"^1.2.1"}}')},734:function(e,t){},735:function(e,t){},904:function(e,t,n){}},[[1621,1,2]]]);
//# sourceMappingURL=main.81fea842.chunk.js.map